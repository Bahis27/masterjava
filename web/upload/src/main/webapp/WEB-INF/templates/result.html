<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Not uploaded users</title>
    </head>
    <body>
        <h4><a href="">Upload XML</a></h4>
        <h3>Not uploaded users</h3>
        <table border="1" cellpadding="8" cellspacing="0">
            <thead>
                <tr>
                    <th>Chunk Number</th>
                    <th>Chunk Result</th>
                    <th>Start Email</th>
                    <th>Last Email</th>
                    <th>Detail Result</th>
                </tr>
            </thead>
            <tbody>
                <!--/*@thymesVar id="users" type="java.util.List<ru.javaops.masterjava.to>"*/-->
                <tr th:each="to : ${tos}">
                    <td th:text="${to.getChunkNumber()}"></td>
                    <td th:switch="${to.isSuccessful()}">
                        <div th:case="true" style="color: green">Success</div>
                        <div th:case="false" style="color: red">Error</div>
                    </td>
                    <td th:text="${to.getStartEmail()}"></td>
                    <td th:text="${to.getLastEmail()}"></td>
                    <td th:switch="${to.isSuccessful()}">
                        <div th:case="true">
                            <div th:switch="${to.isFullySuccessful()}">
                                <div th:case="true">
                                    <p style="color: green">All users in current chunk was uploaded</p>
                                </div>
                                <div th:case="false">
                                    <ul th:each="email : ${to.getExistingUserEmails()}">
                                        <li th:text="${email}"></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div th:case="false">
                            <p style="color: red" th:text="${to.getExceptionMessage()}"></p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>